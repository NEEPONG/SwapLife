<!DOCTYPE html>
<html lang="th" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ของที่ฉันโพสต์ | SwapLife</title>
<script src="https://cdn.tailwindcss.com"></script>
<link
	href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@400;500;700&display=swap"
	rel="stylesheet">
<style>
body {
	font-family: 'IBM Plex Sans Thai', sans-serif;
}

.active-tab {
	border-bottom: 2px solid #22c55e;
	color: #16a34a;
	font-weight: 600;
}
</style>
</head>

<body
	class="flex flex-col min-h-screen bg-gradient-to-br from-gray-50 to-green-50">

	<!-- Navbar -->
	<nav class="bg-white shadow-md">
		<div class="max-w-6xl mx-auto px-4">
			<div class="flex justify-between">
				<div class="flex space-x-7">
					<div>
						<a th:href="@{/}" class="flex items-center py-4 px-2"> <span
							class="font-bold text-gray-700 text-2xl">SwapLife 🌍</span>
						</a>
					</div>
				</div>
				<div class="hidden md:flex items-center space-x-3">
					<a th:href="@{/}"
						class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">🏠
						หน้าแรก</a> <a th:href="@{/items/list}"
						class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">📦
						รายการสิ่งของ</a> <a th:href="@{/items/post}"
						class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">➕
						โพสต์ของ</a> <a th:href="@{/profile}"
						class="py-4 px-2 text-green-500 border-b-4 border-green-500 font-semibold">👤
						โปรไฟล์</a>
				</div>
				<div class="md:hidden flex items-center">
					<button class="outline-none mobile-menu-button">
						<svg class="w-6 h-6 text-gray-500" fill="none"
							stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
							viewBox="0 0 24 24" stroke="currentColor">
                            <path d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
					</button>
				</div>
			</div>
		</div>
	</nav>

	<!-- 🔹 Content -->
	<main class="flex-grow">
		<div class="max-w-7xl mx-auto px-4 py-10 grid grid-cols-12 gap-6">

			<!-- Sidebar -->
			<aside class="col-span-12 md:col-span-3">
				<div class="bg-white rounded-2xl shadow-lg overflow-hidden">
					<div class="p-5 flex items-center gap-3 border-b">
						<div
							class="w-14 h-14 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden">
							<img th:if="${user.profilePictureUrl}"
								th:src="${user.profilePictureUrl}"
								class="w-full h-full object-cover"> <span
								th:if="${user.profilePictureUrl == null}"
								class="text-2xl text-gray-400">👤</span>
						</div>
						<div>
							<div class="font-semibold text-gray-800"
								th:text="${user.username}">username</div>
							<a th:href="@{/profile/edit}"
								class="text-xs text-green-600 hover:underline">✏️
								แก้ไขข้อมูลส่วนตัว</a>
						</div>
					</div>
					<nav class="p-3 text-sm">
						<a th:href="@{/profile}"
							class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-700 font-medium"><span>👤</span>
							บัญชีของฉัน</a> <a th:href="@{/items/mine}"
							class="flex items-center gap-2 px-3 py-2 rounded-lg bg-green-50 text-green-600 font-medium"><span>📦</span>
							ของที่ฉันโพสต์</a> <a th:href="@{/notifications}"
							class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-700 font-medium"><span>🔔</span>
							การแจ้งเตือน</a>
					</nav>
				</div>
			</aside>

			<!-- 🔹 Main Content -->
			<section class="col-span-12 md:col-span-9">
				<div class="bg-white rounded-2xl shadow-lg">

					<!-- Tabs -->
					<div class="px-6 pt-4 border-b flex gap-6 text-sm">
						<a th:href="@{/items/mine(status='all')}"
							th:classappend="${status == 'all' or status == null} ? 'active-tab' : ''"
							class="py-3 text-gray-600 hover:text-green-600">ทั้งหมด</a> <a
							th:href="@{/items/mine(status='available')}"
							th:classappend="${status == 'available'} ? 'active-tab' : ''"
							class="py-3 text-gray-600 hover:text-green-600">รอคำร้องขอ</a> <a
							th:href="@{/items/mine(status='swapped')}"
							th:classappend="${status == 'swapped'} ? 'active-tab' : ''"
							class="py-3 text-gray-600 hover:text-green-600">แลกเปลี่ยนสำเร็จ</a>
						<a th:href="@{/items/mine(status='requested')}"
							th:classappend="${status == 'requested'} ? 'active-tab' : ''"
							class="py-3 text-gray-600 hover:text-green-600">คำร้องขอ</a>
					</div>

					<div class="container mx-auto px-6 py-8">

						<div th:if="${#lists.isEmpty(offers)}"
							class="text-center text-gray-500 py-10">
							<p>ยังไม่มีคำร้องขอแลกเปลี่ยน 😺</p>
						</div>

						<div th:each="offer : ${offers}"
							class="bg-white rounded-xl shadow-md p-6 mb-6 flex flex-col md:flex-row justify-between items-center gap-6">

							<!-- ✅ สินค้าของคุณ -->
							<div class="flex-1 text-center border-r border-gray-200 pr-4">
								<h3 class="text-lg font-bold text-gray-700 mb-3">สินค้าของคุณ</h3>
								<img th:src="${offer.requestedItem.thumbnailUrl}"
									class="w-40 h-40 object-cover mx-auto rounded-lg shadow">
								<p class="font-semibold mt-3 text-gray-800"
									th:text="${offer.requestedItem.title}">ชื่อสินค้า</p>
								<p class="text-sm text-gray-500"
									th:text="${offer.requestedItem.itemCondition}">สภาพ</p>
							</div>

							<!-- 🔁 ไอคอนแลก -->
							<div class="text-center flex-shrink-0">
								<span class="text-4xl text-green-500">↔️</span>
							</div>

							<!-- 🧩 สินค้าที่เสนอมา -->
							<div class="flex-1 text-center border-l border-gray-200 pl-4">
								<h3 class="text-lg font-bold text-gray-700 mb-3">สิ่งของที่เสนอมา</h3>
								<img th:src="${offer.offeredItem.thumbnailUrl}"
									class="w-40 h-40 object-cover mx-auto rounded-lg shadow">
								<p class="font-semibold mt-3 text-gray-800"
									th:text="${offer.offeredItem.title}">ชื่อสินค้า</p>
								<p class="text-sm text-gray-500"
									th:text="${offer.offeredItem.itemCondition}">สภาพ</p>
							</div>

							<!-- 🎯 ปุ่ม -->
							<div class="flex flex-col gap-2 mt-4 md:mt-0">
								<form th:action="@{/swap/accept}" method="post">
									<input type="hidden" name="offerId" th:value="${offer.offerId}">
									<button type="submit"
										class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition">
										✅ ยืนยันการแลก</button>
								</form>

								<form th:action="@{/swap/reject}" method="post">
									<input type="hidden" name="offerId" th:value="${offer.offerId}">
									<button type="submit"
										class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition">
										❌ ปฏิเสธ</button>
								</form>
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>
	</main>

	<!-- Footer -->
	<footer class="bg-gray-800 text-white py-8 mt-16">
		<div class="container mx-auto text-center">
			<p class="mb-2">&copy; 2025 SwapLife. All Rights Reserved.</p>
			<p class="text-sm text-gray-400">ให้ของที่ไม่ได้ใช้
				กลับไปมีคุณค่าอีกครั้ง 🌍</p>
		</div>
	</footer>

</body>
</html>
