<!DOCTYPE html>
<html lang="th" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡πÇ‡∏û‡∏™‡∏ï‡πå | SwapLife</title>
<script src="https://cdn.tailwindcss.com"></script>
<link
	href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@400;500;700&display=swap"
	rel="stylesheet">
<style>
body {
	font-family: 'IBM Plex Sans Thai', sans-serif;
}

.active-tab {
	border-bottom: 3px solid #22c55e;
	color: #16a34a;
	font-weight: 600;
}

.tab-btn.active-tab {
	border-bottom: 2px solid #22c55e;
	color: #16a34a;
}

.offer-card {
	transition: all 0.3s ease;
}

.offer-card:hover {
	transform: translateY(-3px);
	box-shadow: 0 12px 20px -5px rgba(0, 0, 0, 0.1);
}

.swap-icon {
	animation: pulse 2s infinite;
}

@keyframes pulse { 0%, 100% {
	transform: scale(1);
}
50%
{
transform


:


scale
(


1
.1


)
;


}
}
</style>
</head>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script th:src="@{/assets/js/items-offer.js}"></script>

<body
	class="flex flex-col min-h-screen bg-gradient-to-br from-gray-50 to-green-50">

	<!-- Navbar -->
	<nav class="bg-white shadow-md">
		<div class="max-w-6xl mx-auto px-4">
			<div class="flex justify-between">
				<div class="flex space-x-7">
					<div>
						<a th:href="@{/}" class="flex items-center py-4 px-2"> <span
							class="font-bold text-gray-700 text-2xl">SwapLife üåç</span>
						</a>
					</div>
				</div>
				<div class="hidden md:flex items-center space-x-3">
					<a th:href="@{/}"
						class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">üè†
						‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a> <a th:href="@{/items/list}"
						class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">üì¶
						‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á</a> <a th:href="@{/items/post}"
						class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">‚ûï
						‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ç‡∏≠‡∏á</a> <a th:href="@{/profile}"
						class="py-4 px-2 text-green-500 border-b-4 border-green-500 font-semibold">üë§
						‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</a>
				</div>
			</div>
		</div>
	</nav>

	<!-- Content -->
	<main class="flex-grow">
		<div class="max-w-7xl mx-auto px-4 py-8 grid grid-cols-12 gap-6">

			<!-- Sidebar -->
			<aside class="col-span-12 md:col-span-3">
				<div class="bg-white rounded-2xl shadow-lg overflow-hidden">
					<div class="p-5 flex items-center gap-3 border-b">
						<div
							class="w-14 h-14 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden">
							<img th:if="${user.profilePictureUrl}"
								th:src="${user.profilePictureUrl}"
								class="w-full h-full object-cover"> <span
								th:if="${user.profilePictureUrl == null}"
								class="text-2xl text-gray-400">üë§</span>
						</div>
						<div>
							<div class="font-semibold text-gray-800"
								th:text="${user.username}">username</div>
							<a th:href="@{/profile}"
								class="text-xs text-green-600 hover:underline">‚úèÔ∏è
								‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a>
						</div>
					</div>
					<nav class="p-3 text-sm">
						<a th:href="@{/profile}"
							class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-700 font-medium"><span>üë§</span>
							‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a> <a th:href="@{/items/mine}"
							class="flex items-center gap-2 px-3 py-2 rounded-lg bg-green-50 text-green-600 font-medium"><span>üì¶</span>
							‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡πÇ‡∏û‡∏™‡∏ï‡πå</a> <a th:href="@{/logout}"
							class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-700 font-medium"><span>üëã</span>
							‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
					</nav>
				</div>
			</aside>

			<!-- Main Content -->
			<section class="col-span-12 md:col-span-9">
				<div class="bg-white rounded-2xl shadow-lg overflow-hidden">

					<!-- Tabs -->
					<div class="px-6 pt-4 border-b flex gap-6 text-sm">
						<a th:href="@{/items/mine(status='all')}"
							th:classappend="${status == 'all' or status == null} ? 'active-tab' : ''"
							class="py-3 text-gray-600 hover:text-green-600">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</a> <a
							th:href="@{/items/mine(status='available')}"
							th:classappend="${status == 'available'} ? 'active-tab' : ''"
							class="py-3 text-gray-600 hover:text-green-600">‡∏£‡∏≠‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠</a> <a
							th:href="@{/items/mine(status='swapped')}"
							th:classappend="${status == 'swapped'} ? 'active-tab' : ''"
							class="py-3 text-gray-600 hover:text-green-600">‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</a>
						<a th:href="@{/items/mine(status='requested')}"
							th:classappend="${status == 'requested'} ? 'active-tab' : ''"
							class="py-3 text-gray-600 hover:text-green-600">‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠</a> <a
							th:href="@{/offers/history}"
							class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-700 font-medium">
							<span></span> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠
						</a>
					</div>

					<div class="container mx-auto px-6 py-6">

						<!-- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á -->
						<div th:if="${#lists.isEmpty(sentOffers)}"
							class="text-center py-20">
							<img
								src="https://cdn-icons-png.flaticon.com/512/7486/7486749.png"
								class="w-28 h-28 mx-auto mb-4 opacity-80">
							<p class="text-gray-500 text-lg">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡πà‡∏á</p>
						</div>

						<!-- ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á -->
						<div th:each="offer : ${sentOffers}"
							class="bg-white rounded-2xl shadow-lg p-6 mb-6 border border-gray-100 hover:shadow-xl transition duration-300">

							<!-- Header -->
							<div class="flex justify-between items-center border-b pb-3 mb-4">
								<div>
									<p class="font-semibold text-gray-700">
										‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á: <span
											th:text="${offer.requestedItem.user.firstName != null && offer.requestedItem.user.firstName != '' 
                        ? offer.requestedItem.user.firstName 
                        : offer.requestedItem.user.username}">
											‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ </span>
									</p>
									<p class="text-xs text-gray-500"
										th:text="${offer.createdAt != null ? offer.createdAt.format(T(java.time.format.DateTimeFormatter).ofPattern('dd/MM/yyyy HH:mm')) : ''}">
										‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠</p>
								</div>

								<!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ -->
								<span th:switch="${offer.status.name()}"
									class="px-3 py-1 rounded-full text-xs font-semibold"> <span
									th:case="'‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö'" class="bg-green-100 text-green-700">‚úÖ
										‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ñ‡∏π‡∏Å‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö</span> <span th:case="'‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò'"
									class="bg-red-100 text-red-700">‚ùå ‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ñ‡∏π‡∏Å‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò</span> <span
									th:case="'‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£'" class="bg-yellow-100 text-yellow-700">‚è≥
										‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</span>
								</span>
							</div>

							<!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ -->
							<div class="flex flex-col lg:flex-row gap-6 items-center">
								<!-- ‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡πÄ‡∏™‡∏ô‡∏≠ -->
								<div class="flex-1">
									<div
										class="bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-xs font-semibold mb-2 inline-block">
										üéÅ ‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡πÄ‡∏™‡∏ô‡∏≠</div>
									<div class="flex items-center gap-4 bg-gray-50 p-4 rounded-lg">
										<img th:src="${offer.offeredItem.thumbnailUrl}"
											class="w-24 h-24 object-cover rounded-lg shadow">
										<div>
											<p class="font-bold text-gray-800 mb-1"
												th:text="${offer.offeredItem.title}">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>
											<p class="text-xs text-gray-500"
												th:text="${offer.offeredItem.category.name}">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</p>
										</div>
									</div>
								</div>

								<!-- ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô -->
								<div class="flex-shrink-0">
									<div
										class="swap-icon w-12 h-12 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center shadow-lg">
										<span class="text-2xl text-white">‚áÑ</span>
									</div>
								</div>

								<!-- ‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ -->
								<div class="flex-1">
									<div
										class="bg-green-50 text-green-700 px-3 py-1 rounded-full text-xs font-semibold mb-2 inline-block">
										üì¶ ‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</div>
									<div class="flex items-center gap-4 bg-gray-50 p-4 rounded-lg">
										<img th:src="${offer.requestedItem.thumbnailUrl}"
											class="w-24 h-24 object-cover rounded-lg shadow">
										<div>
											<p class="font-bold text-gray-800 mb-1"
												th:text="${offer.requestedItem.title}">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>
											<p class="text-xs text-gray-500"
												th:text="${offer.requestedItem.category.name}">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</p>
										</div>
									</div>
								</div>
							</div>

							<!-- ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° -->
							<div th:if="${offer.message}"
								class="mt-4 text-sm text-gray-600 border-t pt-3 italic">
								üí¨ <span th:text="${offer.message}"></span>
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>
	</main>

	<!-- Footer -->
	<footer
		class="bg-gradient-to-r from-gray-800 to-gray-900 text-white py-6 mt-12">
		<div class="container mx-auto text-center">
			<p class="mb-1 font-semibold text-sm">&copy; 2025 SwapLife. All
				Rights Reserved.</p>
			<p class="text-xs text-gray-400">‡πÉ‡∏´‡πâ‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ
				‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏°‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á üåç</p>
		</div>
	</footer>

</body>
</html>