<!DOCTYPE html>
<html lang="th" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>р╣Вр╕Юр╕кр╕Хр╣Мр╕кр╕┤р╣Ир╕Зр╕Вр╕нр╕Зр╣Гр╕лр╕бр╣И | SwapLife</title>
<script src="https://cdn.tailwindcss.com"></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
	href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@400;500;700&display=swap"
	rel="stylesheet">

<link rel="icon" type="image/png"
	th:href="@{/assets/images/favicon/favicon-96x96.png}" sizes="96x96">

<style>
body {
	font-family: 'IBM Plex Sans Thai', sans-serif;
}
</style>
</head>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<body class="bg-gray-50 flex flex-col min-h-screen">

	<!-- Navbar -->
	<nav class="bg-white shadow-md">
		<div class="max-w-6xl mx-auto px-4 flex justify-between items-center">
			<div>
				<a th:href="@{/}" class="flex items-center py-4 px-2"> <span
					class="font-bold text-gray-700 text-2xl">SwapLife ЁЯМП</span>
				</a>
			</div>
			<div class="hidden md:flex items-center space-x-3">
				<a th:href="@{/}"
					class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">ЁЯПа
					р╕лр╕Щр╣Йр╕▓р╣Бр╕гр╕Б</a> <a th:href="@{/swap}"
					class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">ЁЯФБ
					р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕кр╕┤р╣Ир╕Зр╕Вр╕нр╕З</a> <a th:href="@{/items/post}"
					class="py-4 px-2 text-green-500 border-b-4 border-green-500 font-semibold">тЮХ
					р╣Вр╕Юр╕кр╕Хр╣Мр╕Вр╕нр╕З</a> <a th:href="@{/profile}"
					class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">ЁЯСд
					р╣Вр╕Ыр╕гр╣Др╕Яр╕ер╣М</a>
			</div>
		</div>
	</nav>

	<!-- Post Item Form -->
	<section class="flex-grow">
		<div
			class="max-w-4xl mx-auto bg-white shadow-lg rounded-xl p-8 mt-10 mb-10">
			<h2 class="text-3xl font-bold text-center text-gray-800 mb-8">р╣Вр╕Юр╕кр╕Хр╣Мр╕кр╕┤р╣Ир╕Зр╕Вр╕нр╕Зр╕Др╕╕р╕У</h2>

			<!-- р╣Бр╕кр╕Фр╕З Success Message -->
			<div th:if="${successMessage}"
				class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
				<span th:text="${successMessage}"></span>
			</div>

			<!-- р╣Бр╕кр╕Фр╕З Error Message -->
			<div th:if="${errorMessage}"
				class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
				<span th:text="${errorMessage}"></span>
			</div>

			<form th:action="@{/items/add}" method="post"
				enctype="multipart/form-data" class="space-y-6"
				onsubmit="return validateImages(event)">

				<!-- р╕Кр╕╖р╣Ир╕нр╕кр╕┤р╕Щр╕Др╣Йр╕▓ -->
				<div>
					<label for="title" class="block text-gray-700 mb-1">р╕Кр╕╖р╣Ир╕нр╕кр╕┤р╕Щр╕Др╣Йр╕▓</label>
					<input type="text" id="title" name="title" th:value="${item.title}"
						required
						class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
				</div>

				<!-- р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╕гр╕╣р╕Ыр╕ар╕▓р╕Ю -->
				<div>
					<label class="block text-gray-700 mb-2">р╕ар╕▓р╕Юр╕Ыр╕гр╕░р╕Бр╕нр╕Ър╕кр╕┤р╕Щр╕Др╣Йр╕▓</label>

					<!-- р╕ар╕▓р╕Юр╕лр╕ер╕▒р╕Б (thumbnail) -->
					<div class="mb-4">
						<label class="block text-sm text-gray-600 mb-1">р╕ар╕▓р╕Юр╕лр╕ер╕▒р╕Б
							(Thumbnail) <span class="text-red-500">*</span>
						</label> <input type="file" id="thumbnail" name="thumbnail"
							accept="image/*" required
							class="w-full text-sm text-gray-700 border border-gray-300 rounded-lg p-2"
							onchange="previewThumbnail(event)">
						<div id="thumbnailPreview" class="mt-3"></div>
					</div>

					<!-- р╕ар╕▓р╕Юр╣Ар╕кр╕гр╕┤р╕б -->
					<div>
						<label class="block text-sm text-gray-600 mb-1">р╕ар╕▓р╕Юр╣Ар╕кр╕гр╕┤р╕б
							(р╕кр╕╣р╕Зр╕кр╕╕р╕Ф 4 р╕гр╕╣р╕Ы) <span class="text-red-500">*</span>
						</label> <input type="file" id="images" name="images" accept="image/*"
							multiple required
							class="w-full text-sm text-gray-700 border border-gray-300 rounded-lg p-2"
							onchange="previewImages(event)">
						<div id="imagesPreview" class="mt-3 flex flex-wrap gap-3"></div>
					</div>
				</div>

				<!-- р╕Др╕│р╕нр╕Шр╕┤р╕Ър╕▓р╕в -->
				<div>
					<label for="description" class="block text-gray-700 mb-1">р╕Др╕│р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕кр╕┤р╕Щр╕Др╣Йр╕▓</label>
					<textarea id="description" name="description"
						th:text="${item.description}" rows="4" required
						class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none"></textarea>
				</div>

				<!-- р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕нр╕вр╕▓р╕Бр╣Бр╕ер╕Б -->
				<div>
					<label for="desiredItems" class="block text-gray-700 mb-1">р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕нр╕вр╕▓р╕Бр╣Бр╕ер╕Б</label>
					<input type="text" id="desiredItems" name="desiredItems"
						th:value="${item.desiredItems}"
						placeholder="р╣Ар╕Кр╣Ир╕Щ р╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕н, р╕гр╕нр╕Зр╣Ар╕Чр╣Йр╕▓, р╕Вр╕нр╕Зр╣Гр╕Кр╣Йр╕Чр╕▒р╣Ир╕зр╣Др╕Ы"
						class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
				</div>

				<!-- р╕кр╕ар╕▓р╕Юр╕кр╕┤р╣Ир╕Зр╕Вр╕нр╕З -->
				<div>
					<label for="itemCondition" class="block text-gray-700 mb-1">р╕кр╕ар╕▓р╕Юр╕кр╕┤р╣Ир╕Зр╕Вр╕нр╕З</label>
					<select id="itemCondition" name="itemCondition" required
						class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
						<option value="">-- р╕Бр╕гр╕╕р╕Ур╕▓р╣Ар╕ер╕╖р╕нр╕Бр╕кр╕ар╕▓р╕Ю --</option>
						<option value="р╣Гр╕лр╕бр╣И"
							th:selected="${item.itemCondition?.name() == 'р╣Гр╕лр╕бр╣И'}">р╣Гр╕лр╕бр╣И</option>
						<option value="р╣Ар╕лр╕бр╕╖р╕нр╕Щр╣Гр╕лр╕бр╣И"
							th:selected="${item.itemCondition?.name() == 'р╣Ар╕лр╕бр╕╖р╕нр╕Щр╣Гр╕лр╕бр╣И'}">р╣Ар╕лр╕бр╕╖р╕нр╕Щр╣Гр╕лр╕бр╣И</option>
						<option value="р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Бр╕ер╣Йр╕з"
							th:selected="${item.itemCondition?.name() == 'р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Бр╕ер╣Йр╕з'}">р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Бр╕ер╣Йр╕з</option>
					</select>
				</div>

				<!-- р╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕кр╕┤р╣Ир╕Зр╕Вр╕нр╕З -->
				<div>
					<label for="category_id" class="block text-gray-700 mb-1">р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И</label>
					<select id="category_id" name="category.categoryId" required
						class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
						<option value="">-- р╕Бр╕гр╕╕р╕Ур╕▓р╣Ар╕ер╕╖р╕нр╕Бр╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И --</option>
						<option th:each="cat : ${categories}" th:value="${cat.categoryId}"
							th:text="${cat.name}"
							th:selected="${item.category?.categoryId == cat.categoryId}"></option>
					</select>
				</div>

				<!-- р╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕Бр╕▓р╕гр╕ер╕Зр╕Ыр╕гр╕░р╕Бр╕▓р╕и -->
				<div>
					<label for="listingType" class="block text-gray-700 mb-1">р╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕Бр╕▓р╕гр╕ер╕Зр╕Ыр╕гр╕░р╕Бр╕▓р╕и</label>
					<select id="listingType" name="listingType" required
						class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
						<option value="">-- р╕Бр╕гр╕╕р╕Ур╕▓р╣Ар╕ер╕╖р╕нр╕Бр╕Ыр╕гр╕░р╣Ар╕ар╕Ч --</option>
						<option value="р╣Бр╕ер╕Бр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ"
							th:selected="${item.listingType?.name() == 'р╣Бр╕ер╕Бр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ'}">р╣Бр╕ер╕Бр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ</option>
						<option value="р╕Ър╕гр╕┤р╕Ир╕▓р╕Д"
							th:selected="${item.listingType?.name() == 'р╕Ър╕гр╕┤р╕Ир╕▓р╕Д'}">р╕Ър╕гр╕┤р╕Ир╕▓р╕Д</option>
					</select>
				</div>

				<!-- р╕Ыр╕╕р╣Ир╕б Submit -->
				<button type="submit"
					class="w-full bg-green-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-green-700 transition duration-300">
					тЬЕ р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╣Ир╕Зр╕Вр╕нр╕З</button>

			</form>
		</div>
	</section>

	<!-- Footer -->
	<footer class="bg-gray-800 text-white py-6 mt-auto">
		<div class="text-center">
			<p>&copy; 2025 SwapLife. All Rights Reserved.</p>
		</div>
	</footer>

	<script th:src="@{/assets/js/post.js}"></script>
</body>
</html>