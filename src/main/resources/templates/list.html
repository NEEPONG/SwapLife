<!DOCTYPE html>
<html lang="th" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SwapLife - р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕кр╕┤р╕Щр╕Др╣Йр╕▓</title>

<script src="https://cdn.tailwindcss.com"></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
	href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@400;500;700&display=swap"
	rel="stylesheet">
	
<link
	href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@400;500;700&display=swap"
	rel="stylesheet">
<link rel="icon" type="image/png"
	th:href="@{/assets/images/favicon/favicon-96x96.png}" sizes="96x96">
<link rel="icon" type="image/svg+xml"
	th:href="@{/assets/images/favicon/favicon.svg}">
<link rel="shortcut icon"
	th:href="@{/assets/images/favicon/favicon.ico}">
<link rel="apple-touch-icon" sizes="180x180"
	th:href="@{/assets/images/favicon/apple-touch-icon.png}">
<link rel="manifest"
	th:href="@{/assets/images/favicon/site.webmanifest}">

<style>
body {
	font-family: 'IBM Plex Sans Thai', sans-serif;
}

.item-card {
	transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.item-card:hover {
	transform: translateY(-8px);
	box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px
		rgba(0, 0, 0, 0.04);
}

.badge-swap {
	background: linear-gradient(135deg, #10b981 0%, #059669 100%);
}

.badge-donate {
	background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
}

.filter-btn.active {
	background: linear-gradient(135deg, #10b981 0%, #059669 100%);
	color: white;
}

.category-pill.active {
	background-color: #10b981;
	color: white;
}
</style>
</head>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<body class="bg-gradient-to-br from-gray-50 to-green-50">

	<!-- р╕Яр╕нр╕гр╣Мр╕бр╕Бр╕ер╕▓р╕Зр╕Чр╕╡р╣Ир╣Гр╕Кр╣Йр╕кр╣Ир╕Зр╕Др╣Ир╕▓ search + filter -->
	<form id="filterForm" th:action="@{/items/list}" method="get">
		<input type="hidden" name="q" th:value="${keyword}"> <input
			type="hidden" name="type" th:value="${selectedType}"> <input
			type="hidden" name="category" th:value="${selectedCategory}">
		<input type="hidden" name="condition" th:value="${selectedCondition}">
	</form>

	<!-- Navbar -->
	<nav class="bg-white shadow-md">
		<div class="max-w-6xl mx-auto px-4">
			<div class="flex justify-between">
				<div class="flex space-x-7">
					<div>
						<a th:href="@{/}" class="flex items-center py-4 px-2"> <span
							class="font-bold text-gray-700 text-2xl">SwapLife ЁЯМН</span>
						</a>
					</div>
				</div>
				<div class="hidden md:flex items-center space-x-3">
					<a th:href="@{/}"
						class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">ЁЯПа
						р╕лр╕Щр╣Йр╕▓р╣Бр╕гр╕Б</a> <a th:href="@{/items/list}"
						class="py-4 px-2 text-green-500 border-b-4 border-green-500 font-semibold">ЁЯУж
						р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕кр╕┤р╣Ир╕Зр╕Вр╕нр╕З</a> <a th:href="@{/items/post}"
						class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">тЮХ
						р╣Вр╕Юр╕кр╕Хр╣Мр╕Вр╕нр╕З</a> <a th:href="@{/profile}"
						class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">ЁЯСд
						р╣Вр╕Ыр╕гр╣Др╕Яр╕ер╣М</a>
				</div>
				<div class="md:hidden flex items-center">
					<button class="outline-none mobile-menu-button">
						<svg class="w-6 h-6 text-gray-500" fill="none"
							stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
							viewBox="0 0 24 24" stroke="currentColor">
                            <path d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
					</button>
				</div>
			</div>
		</div>
	</nav>

	<!-- Hero Section -->
	<div class="max-w-7xl mx-auto px-6 mt-4">
		<section
			class="bg-gradient-to-r from-green-500 to-green-600 text-white py-12 rounded-2xl">
			<div class="container mx-auto px-4 text-center">
				<h1 class="text-4xl md:text-5xl font-bold mb-4">р╕Др╣Йр╕Щр╕лр╕▓р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Др╕╕р╕Ур╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г
					ЁЯФН</h1>
				<p class="text-xl mb-8">р╣Бр╕ер╕Бр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕лр╕гр╕╖р╕нр╕гр╕▒р╕Ър╕Ър╕гр╕┤р╕Ир╕▓р╕Др╕кр╕┤р╣Ир╕Зр╕Вр╕нр╕Зр╕Чр╕╡р╣Ир╕вр╕▒р╕Зр╕бр╕╡р╕Др╕╕р╕Ур╕Др╣Ир╕▓</p>
			</div>
		</section>
	</div>

	<!-- Filter and Search Section -->
	<section class="py-8">
		<div class="container mx-auto px-4 max-w-7xl">
			<!-- Search Bar -->
			<div class="mb-8 mt-6">
				<form th:action="@{/items/list}" method="get" id="searchForm"
					class="relative max-w-2xl mx-auto flex items-center">
					<input type="text" name="q" th:value="${keyword}"
						placeholder="ЁЯФН р╕Др╣Йр╕Щр╕лр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓ р╣Ар╕Кр╣Ир╕Щ р╣Ар╕кр╕╖р╣Йр╕нр╕Ьр╣Йр╕▓ р╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕н р╕Вр╕нр╕Зр╣Гр╕Кр╣Й..."
						class="w-full px-6 py-4 rounded-full border-2 border-gray-300 text-lg shadow-sm focus:ring-2 focus:ring-green-400 focus:outline-none transition duration-200">
					<button type="submit"
						class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-green-600 hover:bg-green-700 text-white font-semibold px-6 py-2 rounded-full transition duration-300">
						р╕Др╣Йр╕Щр╕лр╕▓</button>
				</form>
			</div>

			<!-- Filter Section -->
			<div class="bg-white rounded-2xl shadow-lg p-6 mb-8">

				<!-- р╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕Бр╕▓р╕гр╣Бр╕ер╕Бр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ -->
				<div class="mb-6">
					<h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
						<span class="mr-2">ЁЯФЦ</span> р╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕Бр╕▓р╕гр╣Бр╕ер╕Бр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ
					</h3>
					<div class="flex flex-wrap gap-4">
						<a href="#"
							class="filter-btn px-6 py-3 rounded-full font-semibold border transition duration-300"
							th:classappend="${selectedType == 'all'} ? ' bg-green-500 text-white border-green-500' : ' bg-white text-gray-700 border-gray-300'"
							data-type="all">ЁЯМЯ р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф</a> <a href="#"
							class="filter-btn px-6 py-3 rounded-full font-semibold border transition duration-300"
							th:classappend="${selectedType == 'swap'} ? ' bg-green-500 text-white border-green-500' : ' bg-white text-gray-700 border-gray-300'"
							data-type="swap">ЁЯФД р╣Бр╕ер╕Бр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ</a> <a href="#"
							class="filter-btn px-6 py-3 rounded-full font-semibold border transition duration-300"
							th:classappend="${selectedType == 'donate'} ? ' bg-green-500 text-white border-green-500' : ' bg-white text-gray-700 border-gray-300'"
							data-type="donate">ЁЯОБ р╕Ър╕гр╕┤р╕Ир╕▓р╕Д</a>
					</div>
				</div>

				<!-- р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И -->
				<div class="mb-6">
					<h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
						<span class="mr-2">ЁЯУВ</span> р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣Ир╕кр╕┤р╕Щр╕Др╣Йр╕▓
					</h3>
					<div class="flex flex-wrap gap-3">
						<a href="#"
							class="category-pill px-5 py-2 rounded-full text-sm font-medium transition duration-300"
							th:classappend="${selectedCategory == 'all'} ? ' bg-green-500 text-white' : ' bg-gray-200 text-gray-700'"
							data-category="all">р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф</a> <a href="#"
							th:each="cat : ${categories}"
							class="category-pill px-5 py-2 rounded-full text-sm font-medium transition duration-300"
							th:text="${cat.name}" th:data-category="${cat.name}"
							th:classappend="${selectedCategory == cat.name.toLowerCase()} ? ' bg-green-500 text-white' : ' bg-gray-200 text-gray-700'">
						</a>
					</div>
				</div>

				<!-- р╕кр╕ар╕▓р╕Юр╕кр╕┤р╣Ир╕Зр╕Вр╕нр╕З -->
				<div>
					<h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
						<span class="mr-2">тнР</span> р╕кр╕ар╕▓р╕Юр╕кр╕┤р╣Ир╕Зр╕Вр╕нр╕З
					</h3>
					<div class="flex flex-wrap gap-4">
						<a href="#"
							class="condition-btn px-6 py-3 rounded-full font-semibold border transition duration-300"
							th:classappend="${selectedCondition == 'all'} ? ' bg-green-500 text-white border-green-500' : ' bg-white text-gray-700 border-gray-300'"
							data-condition="all">р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф</a> <a href="#"
							class="condition-btn px-6 py-3 rounded-full font-semibold border transition duration-300"
							th:classappend="${selectedCondition == 'new'} ? ' bg-green-500 text-white border-green-500' : ' bg-white text-gray-700 border-gray-300'"
							data-condition="new">тЬи р╣Гр╕лр╕бр╣Ир╕бр╕▓р╕Б</a> <a href="#"
							class="condition-btn px-6 py-3 rounded-full font-semibold border transition duration-300"
							th:classappend="${selectedCondition == 'good'} ? ' bg-green-500 text-white border-green-500' : ' bg-white text-gray-700 border-gray-300'"
							data-condition="good">ЁЯСН р╕кр╕ар╕▓р╕Юр╕Фр╕╡</a> <a href="#"
							class="condition-btn px-6 py-3 rounded-full font-semibold border transition duration-300"
							th:classappend="${selectedCondition == 'fair'} ? ' bg-green-500 text-white border-green-500' : ' bg-white text-gray-700 border-gray-300'"
							data-condition="fair">ЁЯЖЧ р╕Юр╕нр╣Гр╕Кр╣Йр╣Др╕Фр╣Й</a>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Items Grid -->
	<section class="pb-16">
		<div class="container mx-auto px-4 max-w-7xl">
			<div
				class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
				id="itemsGrid">

				<!-- Dynamic: render items from model -->
				<div th:if="${items == null or #lists.isEmpty(items)}"
					class="col-span-full text-center text-gray-500 py-12">
					р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕кр╕┤р╕Щр╕Др╣Йр╕▓</div>

				<div th:each="item : ${items}"
					class="item-card bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col"
					th:attr="data-type=${item.listingType == 'р╣Бр╕ер╕Бр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ' ? 'swap' : 'donate'}, data-category=${item.category.name}">

					<div class="relative">
						<img th:src="${item.thumbnailUrl}" th:alt="${item.title}"
							class="w-full h-48 object-cover"> <span
							th:classappend="${item.listingType == 'р╣Бр╕ер╕Бр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ' ? 'badge-swap' : 'badge-donate'} 
         + ' absolute top-3 right-3 px-3 py-1 text-white text-xs font-bold rounded-full'"
							th:text="${item.listingType}"></span> <span
							class="absolute top-3 left-3 bg-white px-3 py-1 text-green-600 text-xs font-bold rounded-full"
							th:text="${item.itemCondition}"></span>
					</div>

					<!-- ЁЯФ╣ р╕кр╣Ир╕зр╕Щр╣Ар╕Щр╕╖р╣Йр╕нр╕лр╕▓р╕Чр╕╡р╣И fix р╕Др╕зр╕▓р╕бр╕кр╕╣р╕З -->
					<div class="p-5 flex flex-col justify-between h-[200px]">
						<div>
							<h3 class="font-bold text-lg text-gray-800 mb-2 line-clamp-1"
								th:text="${item.title}">Title</h3>
							<p class="text-gray-600 text-sm mb-3 line-clamp-2"
								th:text="${item.description}">Description</p>
							<div class="flex items-center justify-between mb-3">
								<span class="text-xs text-gray-500"
									th:text="${item.category.name}">Category</span> <span
									class="text-xs text-gray-500"
									th:text="${item.createdAt != null ? item.createdAt.format(T(java.time.format.DateTimeFormatter).ofPattern('dd/MM/yyyy')) : ''}">Date</span>
							</div>
						</div>

						<div class="border-t pt-3 flex items-center justify-between">
							<div class="flex items-center space-x-2">
								<div
									class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-sm"
									th:text="${item.user.firstName.substring(0,1).toUpperCase()}">First
									Char of Name</div>
								<span class="text-sm text-gray-700 font-medium"
									th:text="${item.user.firstName != null && item.user.firstName != '' ? item.user.firstName : item.user.username}">User</span>
							</div>
							<a th:href="@{/items/{id}(id=${item.itemId})}"
								class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-full text-sm font-semibold transition duration-300">
								р╕Фр╕╣р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф </a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Footer -->
	<footer class="bg-gray-800 text-white py-8">
		<div class="container mx-auto text-center">
			<p class="mb-2">&copy; 2025 SwapLife. All Rights Reserved.</p>
			<p class="text-sm text-gray-400">р╣Гр╕лр╣Йр╕Вр╕нр╕Зр╕Чр╕╡р╣Ир╣Др╕бр╣Ир╣Др╕Фр╣Йр╣Гр╕Кр╣Й
				р╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╕бр╕╡р╕Др╕╕р╕Ур╕Др╣Ир╕▓р╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З ЁЯМН</p>
		</div>
	</footer>

</body>
<script th:src="@{/assets/js/list.js}"></script>
</html>