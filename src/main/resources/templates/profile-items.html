<!DOCTYPE html>
<html lang="th" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡πÇ‡∏û‡∏™‡∏ï‡πå | SwapLife</title>
<script src="https://cdn.tailwindcss.com"></script>
<link
	href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@400;500;700&display=swap"
	rel="stylesheet">
	
<link
	href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@400;500;700&display=swap"
	rel="stylesheet">
<link rel="icon" type="image/png"
	th:href="@{/assets/images/favicon/favicon-96x96.png}" sizes="96x96">
<link rel="icon" type="image/svg+xml"
	th:href="@{/assets/images/favicon/favicon.svg}">
<link rel="shortcut icon"
	th:href="@{/assets/images/favicon/favicon.ico}">
<link rel="apple-touch-icon" sizes="180x180"
	th:href="@{/assets/images/favicon/apple-touch-icon.png}">
<link rel="manifest"
	th:href="@{/assets/images/favicon/site.webmanifest}">

<style>
body {
	font-family: 'IBM Plex Sans Thai', sans-serif;
}

.active-tab {
	border-bottom: 2px solid #22c55e;
	color: #16a34a;
	font-weight: 600;
}
</style>
</head>

<!-- SweetAlert -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- JS ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤ -->
<script th:src="@{/assets/js/items.js}"></script>

<body
	class="flex flex-col min-h-screen bg-gradient-to-br from-gray-50 to-green-50">

	<!-- Navbar -->
	<nav class="bg-white shadow-md">
		<div class="max-w-6xl mx-auto px-4">
			<div class="flex justify-between">
				<div class="flex space-x-7">
					<div>
						<a th:href="@{/}" class="flex items-center py-4 px-2"> <span
							class="font-bold text-gray-700 text-2xl">SwapLife üåç</span>
						</a>
					</div>
				</div>
				<div class="hidden md:flex items-center space-x-3">
					<a th:href="@{/}"
						class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">üè†
						‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a> <a th:href="@{/items/list}"
						class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">üì¶
						‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á</a> <a th:href="@{/items/post}"
						class="py-4 px-2 text-gray-500 font-semibold hover:text-green-500 transition duration-300">‚ûï
						‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ç‡∏≠‡∏á</a> <a th:href="@{/profile}"
						class="py-4 px-2 text-green-500 border-b-4 border-green-500 font-semibold">üë§
						‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</a>
				</div>
				<div class="md:hidden flex items-center">
					<button class="outline-none mobile-menu-button">
						<svg class="w-6 h-6 text-gray-500" fill="none"
							stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
							viewBox="0 0 24 24" stroke="currentColor">
                            <path d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
					</button>
				</div>
			</div>
		</div>
	</nav>

	<!-- üîπ Content -->
	<main class="flex-grow">
		<div class="max-w-7xl mx-auto px-4 py-10 grid grid-cols-12 gap-6">

			<!-- Sidebar -->
			<aside class="col-span-12 md:col-span-3">
				<div class="bg-white rounded-2xl shadow-lg overflow-hidden">
					<div class="p-5 flex items-center gap-3 border-b">
						<div
							class="w-14 h-14 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden">
							<img th:if="${user.profilePictureUrl}"
								th:src="${user.profilePictureUrl}"
								class="w-full h-full object-cover"> <span
								th:if="${user.profilePictureUrl == null}"
								class="text-2xl text-gray-400">üë§</span>
						</div>
						<div>
							<div class="font-semibold text-gray-800"
								th:text="${user.username}">username</div>
							<a th:href="@{/profile}"
								class="text-xs text-green-600 hover:underline">‚úèÔ∏è
								‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a>
						</div>
					</div>
					<nav class="p-3 text-sm">
						<a th:href="@{/profile}"
							class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-700 font-medium"><span>üë§</span>
							‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a> <a th:href="@{/items/mine}"
							class="flex items-center gap-2 px-3 py-2 rounded-lg bg-green-50 text-green-600 font-medium"><span>üì¶</span>
							‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡πÇ‡∏û‡∏™‡∏ï‡πå</a> <a th:href="@{/logout}"
							class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-700 font-medium"><span>üëã</span>
							‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
					</nav>
				</div>
			</aside>

			<!-- üîπ Main Content -->
			<section class="col-span-12 md:col-span-9">
				<div class="bg-white rounded-2xl shadow-lg">

					<!-- Tabs -->
					<div class="px-6 pt-4 border-b flex gap-6 text-sm">
						<a th:href="@{/items/mine(status='all')}"
							th:classappend="${status == 'all' or status == null} ? 'active-tab' : ''"
							class="py-3 text-gray-600 hover:text-green-600">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</a> <a
							th:href="@{/items/mine(status='available')}"
							th:classappend="${status == 'available'} ? 'active-tab' : ''"
							class="py-3 text-gray-600 hover:text-green-600">‡∏£‡∏≠‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠</a> <a
							th:href="@{/items/mine(status='swapped')}"
							th:classappend="${status == 'swapped'} ? 'active-tab' : ''"
							class="py-3 text-gray-600 hover:text-green-600">‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</a>
						<a th:href="@{/items/mine(status='requested')}"
							th:classappend="${status == 'requested'} ? 'active-tab' : ''"
							class="py-3 text-gray-600 hover:text-green-600">‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠</a> <a
							th:href="@{/offers/history}"
							class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 text-gray-700 font-medium">
							<span></span> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠
						</a>
					</div>

					<!-- Item List -->
					<div class="p-6 space-y-4">

						<div th:if="${#lists.isEmpty(items)}"
							class="flex flex-col items-center justify-center text-gray-500 py-10">
							<img src="https://cdn-icons-png.flaticon.com/512/833/833472.png"
								alt="" class="w-20 h-20 mb-3 opacity-70">
							<div>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á</div>
						</div>

						<!-- üîπ ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡∏ö‡πÅ‡∏ñ‡∏ß -->
						<span th:if="${successMessage}" th:attr="data-success-msg=${successMessage}" hidden></span>
						<div th:each="item : ${items}"
							class="bg-gray-50 rounded-xl border shadow-sm hover:shadow-md transition flex items-center p-4 justify-between">

							<!-- ‡∏ã‡πâ‡∏≤‡∏¢: ‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
							<div class="flex items-center gap-4">
								<img th:src="${item.images[0]?.imageUrl}" alt="item"
									class="w-24 h-24 object-cover rounded-lg border">
								<div>
									<h3 class="font-bold text-lg text-gray-800"
										th:text="${item.title}">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
									<p class="text-sm text-gray-600"
										th:text="'‡∏™‡∏†‡∏≤‡∏û: ' + ${item.itemCondition}"></p>
									<p class="text-sm text-gray-600"
										th:text="'‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà: ' + ${item.category.name}"></p>
									<p class="text-xs text-gray-400 mt-1"
										th:text="${item.createdAt != null ? '‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠ ' + item.createdAt.format(T(java.time.format.DateTimeFormatter).ofPattern('dd/MM/yyyy')) : ''}"></p>
								</div>
							</div>

							<!-- ‡∏Ç‡∏ß‡∏≤: ‡∏õ‡∏∏‡πà‡∏° + ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ -->
							<div class="flex flex-col items-end gap-2">

								<!-- üîπ ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ -->
								<span th:text="${item.status}"
									th:classappend="${item.status.name() == '‡∏ß‡πà‡∏≤‡∏á'} ? 'bg-green-100 text-green-600' : 
						(${item.status.name() == '‡∏°‡∏µ‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠'} ? 'bg-yellow-100 text-yellow-600' : 
						'bg-red-100 text-gray-600')"
									class="text-xs px-3 py-1 rounded-full font-medium"> </span>

								<!-- üîπ ‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î -->
								<a th:href="@{/items/{id}(id=${item.itemId})}"
									class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-full text-sm font-semibold transition">
									‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î </a>

								<!-- üîπ ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç & ‡∏•‡∏ö (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ ‚Äú‡∏ß‡πà‡∏≤‡∏á‚Äù) -->
								<div th:if="${item.status.name() == '‡∏ß‡πà‡∏≤‡∏á'}"
									class="flex gap-2 mt-2">

									<!-- ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç -->
									<a th:href="@{/items/edit/{id}(id=${item.itemId})}"
										class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-full text-sm font-semibold transition">
										‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç </a>

									<!-- ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö -->
									<form th:action="@{/items/delete/{id}(id=${item.itemId})}"
										method="post" onsubmit="return confirmDeleteItem(event)">
										<button type="submit"
											class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-full text-sm font-semibold transition">
											üóëÔ∏è ‡∏•‡∏ö</button>
									</form>
								</div>
							</div>
						</div>

					</div>
				</div>
			</section>
		</div>
	</main>

	<!-- Footer -->
	<footer class="bg-gray-800 text-white py-8 mt-16">
		<div class="container mx-auto text-center">
			<p class="mb-2">&copy; 2025 SwapLife. All Rights Reserved.</p>
			<p class="text-sm text-gray-400">‡πÉ‡∏´‡πâ‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ
				‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏°‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á üåç</p>
		</div>
	</footer>

</body>
</html>
